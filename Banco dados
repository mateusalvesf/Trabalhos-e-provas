create database const
go
use const

CREATE TABLE Professores(
	codProf int constraint pk_codProf primary key identity(1,1),
	nome varchar(80) NOT NULL,
	RG numeric(12) UNIQUE,
	sexo char(1) check (sexo in ('M', 'F')),
	idade int check (idade between 21 and 80),
	cidade varchar(50) CONSTRAINT DF_Prof_cidade DEFAULT ('FRANCA'), ---DEFAULT = SE NAO COLOCAR VALOR VAI AUTOMATICO A CIDADE DE FRANCA
	titulacao varchar (15) CONSTRAINT chk_tit check(titulacao in
				('graduado', 'especialista','mestre', 'doutor')),
	categoria varchar (15) check (categoria in
				('auxiliar', 'assistente', 'adjunto', 'titular')),
	salario money check (salario >= 500)
	)

INSERT INTO Professores (rg,sexo, idade,titulacao,categoria, salario, nome, cidade)
values
	(40343394898,'M', 27, 'GRADUADO','auxiliar',2480, 'Jo√£o',	'RIBEIRAO PRETO')

select * from Professores

---Para saber os nomes das constraints de uma tabela use o comando:

SELECT * FROM sys.objects
WHERE type_desc LIKE '%CONSTRAINT'
				AND
				OBJECT_NAME (parent_object_id) = 'Professores'
order by create_date desc

---Ou use este comando
SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS
WHERE TABLE_NAME = 'Professor'

alter table professores 
add
	constraint cn_titulacao_salario check
(	
	(titulacao ='graduado' and salario < 1000)
	OR
	(titulacao <> 'graduado')
)

update professores set salario =750

insert into Professores (rg,sexo,idade,titulacao,categoria,salario,nome,cidade)
values
	(101020,'F',40,'GRADUADO','TITULAR',900,'ANA','RIBEIRAO PRETO')
insert into Professores (rg,sexo,idade,titulacao,categoria,salario,nome,cidade)
values
	(111020,'F',40,'GRADUADO','TITULAR',900,'JOANA','RIBEIRAO PRETO')


create database TB_CLIENTE
go
use TB_CLIENTE

CREATE TABLE TB_CLIENTE(
	codCliente int  primary key identity(1,1) NOT NULL,
	nome varchar(50) NOT NULL,
	telefone varchar(20)NOT NULL,
	tipo_cliente varchar(20)NOT NULL check (tipo_cliente in
				('Titular', 'Dependente')) ,
	dt_cadastro datetime constraint pkdate default (getdate()) NOT NULL,
	nr_dependetes int NOT NULL,

	
	)

alter table TB_CLIENTE
add
	constraint nr_dependetes check
(	
	(nr_dependetes >=0 and nr_dependetes <=3)
	
)


alter table TB_CLIENTE
add
	constraint nr_dependetes check
(	
	(nr_dependetes >=0 and nr_dependetes <=3)
	
)
alter table TB_CLIENTE
drop constraint nr_dependetes
